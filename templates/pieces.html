{% extends "layout.html" %}
{% block head_extra %}
<script src="/static/js/pieces.js"></script>
{% endblock %}

{% block content %}
  <h1>Liste des pièces
	    <button onclick="document.getElementById('ajoutpiece').style.display='block'" class="btn btn-primary btn-mini">Nouvelle pièce</button>
  </h1>

  <div id="ajoutpiece" class="w3-modal w3-animate-opacity">
    <div class="w3-modal-content">
      <div class="modal-header">
        <span onclick="document.getElementById('ajoutpiece').style.display='none'" 
        class="w3-button w3-display-topright">&times;</span>
        <h3>Nouvelle pièce</h3>
      </div>
      <div class="w3-container" style="padding-top:14px;">
        <p>
          <input type="text" id="ajoutnumero" placeholder="Numéro" />
        </p>
      </div>
      <div class="w3-footer">
        <!-- <a href="#" class="btn" data-dismiss="modal">Annuler</a> -->
        <a href="#" class="btn btn-primary" id="ajoutenvoyer" style="margin-left: 14px; margin-bottom: 14px;">Sauvegarder</a>
      </div>
    </div>
  </div>

  <div id="loading" style="text-align: center">
    <img src="/static/loading.gif" />
  </div>

  <div id="ajout-a-facture" class="modal hide" tabindex='-1'>
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3>Ajout de pièce</h3>
    </div>
    <div class="modal-body">
      <div id="boutons-factures" class="btn-group well" data-toggle="buttons-radio">

      </div>
      <div id="controles">
        <form class="form-inline" id="form-ajouter-a-facture">
          <input class="input-mini" type="text" id="quantite" placeholder="quantité">
          <input type="submit" class="btn btn-primary" value="Ok">
        </form>
      </div>
    </div>
  </div>

  <div id="filtres">
    <form class="form-inline" onsubmit="return false;">
      <span id="filtre-numero" style="padding-right:30px;"></span>
      <span id="filtre-section"></span>
      <span id="filtre-nom"></span>
      <span id="filtre-reference"></span>
      <label class="checkbox" >
        <input type="checkbox" id="pieces-actives-seulement" checked="checked" style="padding:15px;">
        <div style="padding-right:30px">Pièces actives seulement</div>
      </label>
      <button id="filtre-reset" class="btn">Reset !</button>
      </div>
    </form>
  </div>

  <div style="padding:20px;">
    <table id="pieces" data-row-class-callback="ListePiecesRowClass">
      <thead>
         <tr>
           <th data-column="numero">#</th>
           <th data-column="section">Section</th>
           <th data-column="nom">Nom</th>
           <th data-column="reference">Référence</th>
           <th data-column="caracteristique">Caractéristiques</th>
           <th data-column="prix" data-transform="NombreVersPrix">Prix</th>
           <th data-column="quantite">Quantité</th>
           <th data-column="remarques">Remarques</th>
           <th data-transform="ListePiecesColonneIconesData"></th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>

{% endblock %}
